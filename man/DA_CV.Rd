% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/da_cv.R
\name{DA_CV}
\alias{DA_CV}
\title{Domain Adaptive Cross-Validation (DA-CV)}
\usage{
DA_CV(
  samples,
  target,
  env_stack,
  nodata_value,
  folds_k,
  cate_num,
  autoc_threshold
)
}
\arguments{
\item{samples}{An \code{sf} object. Must contain sample locations (POINT geometry)
and attributes including target variable and (optionally) sample IDs.}

\item{target}{A \code{SpatRaster}. Target raster (e.g., biomass).}

\item{env_stack}{A \code{SpatRaster}. Stack of environmental predictor rasters.}

\item{nodata_value}{Numeric. Value in \code{target} that indicates missing data.}

\item{folds_k}{Integer. Number of folds for cross-validation.}

\item{cate_num}{Integer. Number of categories for SP-CV stratification.}

\item{autoc_threshold}{Numeric. Spatial autocorrelation threshold for SP-CV.}
}
\value{
A data frame with DA-CV fold assignments and sample coordinates.
Additionally writes probability and category rasters, and a CSV with fold assignments.
}
\description{
Implements prediction-domain adaptive cross-validation (DA-CV). This method combines random-domain cross-validation (RDM-CV)
for "similar" prediction regions and spatial cross-validation (SP-CV) for
"dissimilar" prediction regions, based on dissimilarity quantification via
adversarial validation.
}
\examples{
library(sf)
library(terra)

# Create a simple raster as "target"
target <- rast(nrows = 10, ncols = 10, xmin = 0, xmax = 10, ymin = 0, ymax = 10)
values(target) <- matrix(runif(100, 50, 150), nrow = 10, ncol = 10)

# Create two simple environmental predictor rasters
env1 <- rast(target); values(env1) <- runif(ncell(env1))
env2 <- rast(target); values(env2) <- runif(ncell(env2))
env_stack <- c(env1, env2)

# Generate some random sample points inside the raster extent
set.seed(42)
pts <- data.frame(
  x = runif(10, 0, 10),
  y = runif(10, 0, 10),
  ID = 1:10
)
samples <- st_as_sf(pts, coords = c("x", "y"), crs = crs(target))

# Run DA-CV with small folds for demo
# (requires RDM_CV() and spatial_plus_cv() to be implemented in the package)
out <- DA_CV(
  samples = samples,
  target = target,
  env_stack = env_stack,
  nodata_value = NA,
  folds_k = 2,
  cate_num = 2,
  autoc_threshold = 0.3
)
print(out)

}
